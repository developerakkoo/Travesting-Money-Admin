<ion-header [translucent]="true" class="ion-no-border">
  <ion-toolbar>
    <ion-title>✍️ Blog Editor</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="blogs" color="light"></ion-back-button>
    </ion-buttons>
    <ion-button
      slot="end"
      (click)="upload()"
      fill="solid"
      color="success"
      shape="round"
    >
      <ion-icon name="send" slot="start"></ion-icon>
      Publish Blog
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Editor Container -->
  <div class="editor-container">
    <!-- Editor Header -->
    <ion-card class="editor-header">
      <ion-card-content>
        <div class="editor-info">
          <h2>Create New Blog Post</h2>
          <p>Write engaging content for your audience</p>
        </div>
        <div class="editor-stats">
          <ion-chip color="primary" size="small">
            <ion-icon name="document-text" slot="start"></ion-icon>
            Rich Text Editor
          </ion-chip>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Image Upload Section -->
    <ion-card class="image-upload-card">
      <ion-card-content>
        <div class="image-upload-section">
          <h3>
            <ion-icon name="image" color="primary"></ion-icon>
            Featured Image
          </h3>
          <p>Upload a featured image for your blog post (optional)</p>
          
          <div class="image-upload-area" *ngIf="!imageUrl">
            <input 
              type="file" 
              accept="image/*" 
              (change)="onImageSelected($event)"
              #fileInput
              style="display: none;"
            />
            <ion-button 
              fill="outline" 
              color="primary" 
              (click)="openFileDialog()"
              class="upload-button"
            >
              <ion-icon name="cloud-upload" slot="start"></ion-icon>
              Choose Image
            </ion-button>
            <p class="upload-hint">Max size: 5MB | Supported: JPG, PNG, GIF</p>
          </div>

          <div class="image-preview" *ngIf="imageUrl">
            <img [src]="imageUrl" alt="Blog preview" class="preview-image">
            <div class="image-actions">
              <ion-button 
                fill="outline" 
                color="danger" 
                size="small"
                (click)="removeImage()"
              >
                <ion-icon name="trash" slot="start"></ion-icon>
                Remove
              </ion-button>
              <ion-button 
                fill="outline" 
                color="primary" 
                size="small"
                (click)="openFileDialog()"
              >
                <ion-icon name="refresh" slot="start"></ion-icon>
                Change
              </ion-button>
            </div>
          </div>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Editor Wrapper -->
    <ion-card class="editor-card">
      <ion-card-content>
        <div class="NgxEditor__Wrapper">
          <ngx-editor-menu
            [editor]="editor"
            [toolbar]="toolbar"
            class="editor-toolbar"
          >
          </ngx-editor-menu>

          <div class="editor-content">
            <ngx-editor
              [editor]="editor"
              [(ngModel)]="html"
              [disabled]="false"
              [placeholder]="'Start writing your blog post here...'"
              class="editor-textarea"
            >
            </ngx-editor>
          </div>

          <ngx-editor-floating-menu
            [editor]="editor"
            class="floating-menu"
          ></ngx-editor-floating-menu>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Editor Footer -->
    <ion-card class="editor-footer">
      <ion-card-content>
        <div class="footer-actions">
          <div class="editor-tips">
            <ion-icon name="bulb" color="warning"></ion-icon>
            <span>Tip: Use H1 for your main title, H2-H6 for subheadings</span>
          </div>
          <div class="action-buttons">
            <ion-button
              (click)="clearEditor()"
              fill="outline"
              color="medium"
              size="small"
            >
              <ion-icon name="refresh" slot="start"></ion-icon>
              Clear
            </ion-button>
            <ion-button
              (click)="previewBlog()"
              fill="outline"
              color="primary"
              size="small"
            >
              <ion-icon name="eye" slot="start"></ion-icon>
              Preview
            </ion-button>
            <ion-button
              (click)="upload()"
              fill="solid"
              color="success"
              size="small"
            >
              <ion-icon name="send" slot="start"></ion-icon>
              Publish
            </ion-button>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
